<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Complete Payment</title>
</head>
<body style="text-align:center; margin-top:100px;">
  <h2>Complete Your Payment</h2>
  <p>Amount to Pay: â‚¹{{ amount // 100 }}</p>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    var options = {
      "key": "{{ key_id }}",
      "amount": "{{ amount }}",
      "currency": "INR",
      "name": "FuelSathi",
      "description": "Fuel Delivery Payment",
      "order_id": "{{ order_id }}",
      "handler": function (response){
          // Send payment success to Flask backend
          fetch("/payment_success", {
              method: "POST",
              headers: {"Content-Type": "application/x-www-form-urlencoded"},
              body: new URLSearchParams(response)
          }).then(() => {
              window.location.href = "/dashboard";
          });
      },
      "prefill": {
          "name": "{{ name }}",
          "email": "{{ email }}"
      },
      "theme": {
          "color": "#3399cc"
      }
    };
    var rzp = new Razorpay(options);
    rzp.open();
  </script>
</body>
</html>
